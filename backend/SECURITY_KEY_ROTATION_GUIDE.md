# üîê API Key Security & Rotation Guide

## üö® CRITICAL: Key Exposure Prevention Strategy

### **IMMEDIATE ACTIONS REQUIRED**

1. **Revoke Exposed Keys**
   - OpenAI: `sk-proj-4tpMP1if...` ‚Üí Go to OpenAI dashboard, revoke immediately
   - Anthropic: `sk-ant-api03-xqYt...` ‚Üí Go to Anthropic console, revoke immediately

2. **Generate New Keys with Restrictions**
   - Set usage limits (e.g., $50/month max)
   - Enable usage alerts at 80% threshold
   - Use separate keys for dev/staging/prod

### **SECURE DEVELOPMENT WORKFLOW**

#### **Step 1: Environment Key Management**
```bash
# NEVER commit real keys to git
# Use this pattern for development:
OPENAI_API_KEY="DEV_KEY_PLACEHOLDER_REPLACE_ME"
ANTHROPIC_API_KEY="DEV_KEY_PLACEHOLDER_REPLACE_ME"
```

#### **Step 2: Local Development Setup**
```bash
# Create .env.local (ignored by git)
cp .env.example .env.local
# Edit .env.local with real keys (NEVER commit this file)
```

#### **Step 3: Production Deployment**
- Use environment variables from secure vault (Vercel, Railway, AWS Secrets Manager)
- Never store keys in code or config files
- Use CI/CD environment variables

### **SECURITY VALIDATION CHECKLIST**

- [ ] All exposed keys revoked
- [ ] New keys generated with usage limits  
- [ ] .env files contain only placeholders
- [ ] .env.local created for local development
- [ ] .env.local added to .gitignore
- [ ] Production uses secure environment variables
- [ ] Key validation middleware implemented
- [ ] Usage monitoring enabled

### **PRODUCTION DEPLOYMENT SECURITY**

#### **Environment Variable Sources (Choose One):**
1. **Vercel**: Environment Variables section in dashboard
2. **Railway**: Variables tab in project settings  
3. **AWS**: Secrets Manager or Parameter Store
4. **Docker**: Secrets or external env file injection
5. **Kubernetes**: Secrets manifests

#### **Security Rules:**
- ‚úÖ Keys stored in secure vault/dashboard
- ‚úÖ Different keys for each environment
- ‚úÖ Usage limits and monitoring enabled
- ‚ùå NEVER store keys in code
- ‚ùå NEVER commit .env.local
- ‚ùå NEVER hardcode keys in config files

### **EMERGENCY PROCEDURES**

If keys are exposed:
1. **IMMEDIATELY** revoke all exposed keys
2. Generate new keys with tighter restrictions
3. Update all deployment environments
4. Review git history for exposure timeline
5. Monitor usage for unauthorized access
6. Implement additional security measures

### **ONGOING SECURITY PRACTICES**

- Rotate keys quarterly
- Monitor usage patterns
- Set up alerts for unusual activity
- Regular security audits
- Team training on key security

---
**Generated by Winston (Architect) - Marketing Machine Security Hardening**